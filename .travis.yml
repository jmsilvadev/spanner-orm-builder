language: php

php:
  - 7.3

env:
  global:
    - XDEBUG_MODE=coverage

before_script:
  - pecl install grpc
  - pecl install protobuf
  - echo "extension=grpc.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini
  - echo "extension=protobuf.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini
  - composer install

script:
  - php vendor/bin/codecept run --coverage --coverage-text